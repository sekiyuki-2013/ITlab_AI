<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>アバターチャット</title>
</head>
<body>
    <input type="text" id="txt" size="100" value="">
    <form>
        <select name="lang" id="lang">
            <option value="">翻訳したい言語</option>
            <option value="英語">英語</option>
            <option value="中国語">中国語</option>
            <option value="韓国語">韓国語</option>
            <option value="フランス語">フランス語</option>
            <option value="イタリア語">イタリア語</option>
            <option value="ドイツ語">ドイツ語</option>
            <option value="ロシア語">ロシア語</option>
            <option value="日本語">日本語</option>
        </select>
    </form>    
    <div id="answer">翻訳内容</div>
    <input type="button" id="start" value="send">

    <script>
        $(function(){
            $("#start").click(function(){
                var str = $("#txt").val();
                var lang = $("#lang").val(); // プルダウンメニューの値を取得

                $.ajax({
                    type: 'GET',
                    url: '/send',
                    data: { q: str, lang: lang }, // データにlangを追加
                    success: function(answer) {
                        $("#answer").html(answer); // #answerに回答を表示する
                    },
                    error: function() {
                        alert('失敗しました');
                    }
                });
            });
        });
    </script>
</body>
</html>
